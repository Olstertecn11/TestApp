@model IEnumerable<TestAplication.Models.Data.HistorialCarga>
  @{
  ViewData["Title"] = "Historial de Cargas";
  }

  <h2 class="mb-4">Historial de Cargas</h2>

  @if (Model == null || !Model.Any())
  {
  <div class="alert alert-info text-center mt-4">
    <i class="fa fa-info-circle"></i> No existen cargas registradas.
  </div>
  }
  else
  {
  <table class="table table-bordered table-hover align-middle custom-table">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Archivo</th>
        <th>Fecha de Carga</th>
        <th>Estado</th>
        <th>Totales</th>
        <th>IP</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      @foreach (var item in Model)
      {
      var badgeColor = item.Estado == "Completado" ? "success" : "danger";
      var rowClass = item.EstaActivo ? "" : "row-inactivo"; // ðŸ‘ˆ Clase para los desactivados
      <tr class="@rowClass">
        <td>@item.IdHistorialCarga</td>
        <td>@item.NombreArchivo</td>
        <td>@item.FechaCarga.ToString("dd/MM/yyyy HH:mm")</td>
        <td>
          <span class="badge bg-@badgeColor">@item.Estado</span>
        </td>
        <td>
          <div>
            <strong>Empresas:</strong> @item.TotalEmpresas <br />
            <strong>Sucursales:</strong> @item.TotalSucursales <br />
            <strong>Colaboradores:</strong> @item.TotalColaboradores
          </div>
        </td>
        <td>@item.IpCarga</td>
        <td class="text-center">
          <a asp-action="Details" asp-route-id="@item.IdHistorialCarga" class="btn btn-primary btn-sm">
            <i class="fas fa-eye"></i>
            Detalles
          </a>
          <form asp-action="Delete" asp-route-id="@item.IdHistorialCarga" method="post" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm"
              onclick="return confirm('Â¿Seguro que deseas eliminar todo el conjunto de datos de esta carga?');">
              <i class="fa fa-trash"></i> Eliminar todo
            </button>
          </form>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }

  <style>
    .custom-table tr.row-inactivo>td {
      background-color: #f8d7da !important;
      color: #721c24 !important;
    }

    .custom-table tr.row-inactivo:hover {
      background-color: #f5c6cb !important;
    }
  </style>
